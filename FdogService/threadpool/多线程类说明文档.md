#### 多线程类说明文档



多线程使用示例：

1. 添加多线程类头文件
2. 创建多线程类对象
3. 调用对象的添加任务函数添加需要在多线程中执行的函数（支持任意参数）

```cpp
#include"threadpool.h"

void func(int arg1, int arg2)
{
    //TODO
    return;
}

int main()
{
    ThreadPool * threadpool = new ThreadPool();
    threadpool->addTasks(func,(void*)parameter);
    return 0;
}
```



ThreadPool类头文件说明：

```
    std::queue<Task> taskQueue;             //任务队列
    std::thread * managerTID;               //管理线程
    std::vector<std::thread *> worksTID;    //工作线程
    std::map<std::thread::id,std::thread *> workAddr;   //记录线程的地址
    int threadNum;                          //默认工作线程数
    int threadMin;                          //最小工作线程
    int threadMax;                          //最大工作线程
    int threadBusyNum;                      //忙碌线程数量
    int threadLiveNum;                      //存活线程数量
    int threadEixtNum;                      //退出线程数量
    std::condition_variable queueFull;      //条件变量
    std::condition_variable queueEmpty;     //条件变量
    int threadShutdown;                     //是否要销毁线程池
    
    //默认构造函数
    ThreadPool();
    //初始化线程池 默认配置
    bool ThreadCreateInit();

    //获取当前任务队列的剩余任务数量
    int getTaskResidualQuantity();

    //获取当前存活线程数量
    int getThreadLiveQuantity();

    //获取当前忙碌线程数量
    int getThreadBusyQuantity();

    //额外申请线程
    bool requestAdditionalThreads();

    //销毁线程
    bool destroyThreads();

    //对vector做修改
    bool worksTreadEixt(std::thread::id Tid);

    //添加任务
    bool addTasks(void (*func)(void * ),void * arg);

    //获取任务
    Task getTask();
    
    //管理函数
    friend void * managerFunctionv(void * arg);
    
    //工作函数
    friend void * workFunction(void * arg);

    //释放资源
    ~ThreadPool();
```

具体函数实现可查看源码。

注：ThreadCreateInit函数中的threadNum，threadMax的初始化按照当前环境CPU核数进行初始化。

如：

```
    this->threadNum =std::thread::hardware_concurrency();
    this->threadMax =std::thread::hardware_concurrency()*2;
```

std::thread::hardware_concurrency()函数用于获取当前环境CPU核心数，最大线程数为核心数×2。

当然，未来您也可以根据使用环境重载该函数，使用您认为合适的数值。

当前代码测试于linux环境，不保证windows环境可用。

